import{b as e,c as a}from"./user-54b7ede7.js";import{j as l}from"./index-7e413c56.js";import{f as s}from"./feedback-5363c0cc.js";import{d as t,e as n,Z as r,i as u,Y as o,ag as i,c as d,U as m,O as p,o as c,a as v,F as f,a7 as b,S as j,M as x,az as g,aA as h}from"./@vue-c5a747fc.js";import{_}from"./index-d75be824.js";import"./lodash-20cd73ca.js";import"./dayjs-9ee440cb.js";import"./axios-5b55c11d.js";import"./element-plus-230cec57.js";import"./lodash-es-fb3d0246.js";import"./@vueuse-90035fc5.js";import"./@element-plus-388117bf.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-92a447fa.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-9ca8b935.js";import"./vue-router-641e505b.js";import"./pinia-801b3705.js";/* empty css                    */const w=e=>(g("data-v-10e2dad4"),e=e(),h(),e),y={class:"interface"},k=w((()=>v("div",{class:"img-box"},[v("img",{src:"/static/png/gkj1-442398ae.png",alt:""})],-1))),z=w((()=>v("div",{class:"img-box"},[v("img",{src:"/static/png/gkj2-de611663.png",alt:""})],-1))),I={class:"btn-box"},A={class:"card-box"},O=w((()=>v("div",{class:"card-header"},[v("span",null,"控制")],-1))),V={class:"newpower-box"},C={class:"ctnbox-box"},M={class:"ctn-box"},N={class:"ctn-box"},S=_(t({__name:"Index",setup(t){const g=n(),h=r({index:null});n([]);const _=n({}),w=n([]),S=n([]),U=n([]),E=n([]),F=n([]),R=n(null),Y=n(2e3);u((()=>{D()})),o((()=>{Z()}));const Z=()=>{clearInterval(R.value),R.value=null},q=e=>{a({cmd:1,index:e}).then((e=>{s.msgSuccess("复位成功")})).catch((e=>{}))},B=(e,a,l)=>{const s=new Map;for(const t of e.concat(a))if(s.has(t[l])){const e=s.get(t[l]);for(const a in t)a!==l&&(e[a]=t[a])}else s.set(t[l],t);return Array.from(s.values())},D=()=>{e().then((e=>{_.value=e,w.value=[],S.value=[],U.value=[],l(_.value).map(((e,a)=>{e.name.indexOf("485")>-1?w.value.push(e):e.name.indexOf("CAN")>-1?S.value.push(e):U.value.push(e)})),w.value.map(((e,a)=>(e.value=l(e.value),e.value.map((a=>(a[e.name]=a.value,a))),e))),w.value.reduce(((e,a,l)=>{let s=B(e.value,a.value,"name");return l===w.value.length-1&&(E.value=s),{value:s}})),S.value.map(((e,a)=>(e.value=l(e.value),e.value.map((a=>(a[e.name]=a.value,a))),e))),S.value.reduce(((e,a,l)=>{let s=B(e.value,a.value,"name");return l===S.value.length-1&&(F.value=s),{value:s}})),U.value.map(((e,a)=>(e.value=l(e.value),e))),Z(),R.value=setInterval((()=>{D()}),Y.value)})).catch((e=>{}))};return(e,a)=>{const l=i("el-option"),t=i("el-select"),n=i("el-button"),r=i("el-form-item"),u=i("el-form"),o=i("el-card"),_=i("el-col"),R=i("el-table-column"),Y=i("el-table"),Z=i("el-row");return c(),d("div",y,[m(Z,null,{default:p((()=>[m(_,{xs:24,sm:8},{default:p((()=>[k,z,v("div",I,[v("div",A,[m(o,{class:"box-card"},{header:p((()=>[O])),default:p((()=>[v("div",null,[m(u,{ref_key:"formRef",ref:g,model:h,size:"default"},{default:p((()=>[m(r,{label:"通道选择",prop:"index"},{default:p((()=>[v("div",V,[m(t,{modelValue:h.index,"onUpdate:modelValue":a[0]||(a[0]=e=>h.index=e),placeholder:"通道",class:"newpower-input"},{default:p((()=>[(c(),d(f,null,b(6,(e=>m(l,{key:e,label:e,value:e},null,8,["label","value"]))),64))])),_:1},8,["modelValue"]),m(n,{type:"primary",onClick:a[1]||(a[1]=e=>{g.value&&(null!==h.index?q(Number(h.index)):s.msgError("请选择通道"))})},{default:p((()=>[j("复位")])),_:1})])])),_:1})])),_:1},8,["model"])])])),_:1})])])])),_:1}),m(_,{xs:24,sm:16},{default:p((()=>[v("div",C,[v("div",M,[m(Y,{data:E.value,stripe:"",border:"",align:"center"},{default:p((()=>[m(R,{prop:"name",label:"数据名称",align:"center"}),(c(!0),d(f,null,b(w.value,((e,a)=>(c(),x(R,{key:a,prop:e.name,label:e.name,align:"center","min-width":"100"},null,8,["prop","label"])))),128))])),_:1},8,["data"])]),v("div",N,[m(Y,{data:F.value,stripe:"",border:"",align:"center"},{default:p((()=>[m(R,{prop:"name",label:"数据名称",align:"center"}),(c(!0),d(f,null,b(S.value,((e,a)=>(c(),x(R,{key:a,prop:e.name,label:e.name,align:"center","min-width":"100"},null,8,["prop","label"])))),128))])),_:1},8,["data"])]),(c(!0),d(f,null,b(U.value,((e,a)=>(c(),d("div",{key:a,class:"ctn-box"},[m(Y,{data:e.value,stripe:"",border:"",align:"center"},{default:p((()=>[m(R,{prop:"name",label:"数据名称",align:"center"}),m(R,{prop:"value",label:e.name,align:"center","min-width":"130"},null,8,["label"])])),_:2},1032,["data"])])))),128))])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-10e2dad4"]]);export{S as default};
